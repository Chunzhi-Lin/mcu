MCU寄存器列表
================

mcu寄存器功能介绍
--------------------

适用于以下系列产品：

- BM1684xEVB

寄存器表一
~~~~~~~~~~

==================== ============= =============== ==================================
        name          reg address   Default value             note
==================== ============= =============== ==================================
单板类型                 0x00            0x00               0x00:EVB
                                                            0x01:SA7
                                                            0x02:SC7
                                                            0x03:SE7
-------------------- ------------- --------------- ----------------------------------
MCU版本                 0x01             0x00                 MCU程序版本号
-------------------- ------------- --------------- ----------------------------------
硬件版本                0x02              0x00           Bit0~Bit3:PCB Version
                                                         Bit4~BIt7:BOM Version
-------------------- ------------- --------------- ----------------------------------
控制命令                 0x03           0x00            0x02:CPLD命令MCU对核心板下电
                                                        0x03:CPLD命令MCU复位1686
                                                        0x07:BM1686命令mcu对1686下上电
                                                        0x08:MCU通过I2C升级
-------------------- ------------- --------------- ----------------------------------
BM1686结温寄存器         0x04           0x00            BM1686温度,每2s自动更新一次
-------------------- ------------- --------------- ----------------------------------
板上温度                 0x05          0x00             检测PA6(NTC_MON)
==================== ============= =============== ==================================


寄存器表二
~~~~~~~~~~

.. table::
   :widths: 25 10 10 100

   ==================== ============= =============== ==================================
           name          reg address   Default value             note
   ==================== ============= =============== ==================================
    中断状态寄存器1           0x06          0x00          Bit0=1:BM1686超温告警
                                                          Bit1=1:68127电源超温告警
                                                          Bit2=1:板上温度超温告警
                                                          Bit3=1:板上温度超温掉电
                                                          Bit4=1:BM1686超温掉电
                                                          Bit5=1:系统上电异常掉电
                                                          Bit6=1:12V电压异常掉电
                                                          Bit7=1:BM1686重启命令
                                                          让mcu复位bm1686导致的bm1686复位
   -------------------- ------------- --------------- ----------------------------------
    中断状态寄存器2           0x07          0x00           Bit0=1:WATCHDOG导致的BM1686
                                                           Bit1=1:装备测试中断,置位后,
                                                           产生中断,仅做工厂测试用
                                                           Bit2-bit7:预留
   -------------------- ------------- --------------- ----------------------------------
   中断屏蔽寄存器1          0x08          0x00            Bit0=1:屏蔽BM1686超温告警
                                                          Bit1=1:屏蔽68127电源超温告警
                                                          Bit2=1:屏蔽板上温度超温告警
                                                          Bit3=1:屏蔽板上温度超温掉电
                                                          Bit4=1:屏蔽BM1686超温掉电
                                                          Bit5=1:屏蔽系统上电异常掉电
                                                          Bit6=1:屏蔽12V电压异常掉电
                                                          Bit7=1:屏蔽BM1686重启命令
                                                          让mcu复位bm1686导致的bm1686复位
   -------------------- ------------- --------------- ----------------------------------
   中断屏蔽寄存器2           0x09          0x00          Bit0=1:屏蔽WATCH DOG导致的BM1686
                                                         Bit1=1:屏蔽装备测试中断
                                                         Bit2-bit7:预留
   -------------------- ------------- --------------- ----------------------------------
   复位次数统计寄存器          0x0a          0x00         记录系统上电之后bm1686被RESET的次数
   -------------------- ------------- --------------- ----------------------------------
   运行时间0寄存器           0x0b          0x00           系统自上电以来的秒数,低8位
   -------------------- ------------- --------------- ----------------------------------
   运行时间1寄存器           0x0c          0x00           系统自上电以来的秒数,高8位
   -------------------- ------------- --------------- ----------------------------------
   复位掉电原因寄存器          0x0d          0x00         Bit0=1:68224电源温度过高导致的下电
                                                          Bit1=1:系统电源异常导致的下电
                                                          Bit2=1:12V电压异常导致的下电
                                                          Bit3=1:BM1686重启命令导致的bm1686复位
                                                          Bit7=1:bm1686温度过高导致的下电
   ==================== ============= =============== ==================================

寄存器表三
~~~~~~~~~~

.. table::
   :widths: 60 20 20 80

   ==================== ============= =============== ==================================
           name          reg address   Default value             note
   ==================== ============= =============== ==================================
   系统rtc时间               0x0e          0x00          seconds
   -------------------- ------------- --------------- ----------------------------------
   系统rtc时间               0x0f          0x00          minutes
   -------------------- ------------- --------------- ----------------------------------
   系统rtc时间               0x10          0x00          hours
   -------------------- ------------- --------------- ----------------------------------
   系统rtc时间               0x11          0x00          date
   -------------------- ------------- --------------- ----------------------------------
   系统rtc时间               0x12          0x00          month
   -------------------- ------------- --------------- ----------------------------------
   系统rtc时间               0x13          0x00          year
   -------------------- ------------- --------------- ----------------------------------
   gp0寄存器                 0x14          0x00          存放gp0值
   -------------------- ------------- --------------- ----------------------------------
   ddr寄存器                 0x15          0x00          ddr type
   -------------------- ------------- --------------- ----------------------------------
   pwr_good寄存器            0x16          0x00          正常返回值1
   -------------------- ------------- --------------- ----------------------------------
   mode_flag寄存器           0x17          0x00          work mode:soc/pcie/mix
   -------------------- ------------- --------------- ----------------------------------
   tpu功耗                   0x22          0x00         返回TPU功耗状态
   -------------------- ------------- --------------- ----------------------------------
   REG_POWER_LO             0x24          0x00          整板12v功耗低八位
   -------------------- ------------- --------------- ----------------------------------
   REG_POWER_HI             0x25          0x00          整板12v功耗高八位
   -------------------- ------------- --------------- ----------------------------------
   REG_CURRENT_LO           0x28          0x00          整板12v电流低八位
   -------------------- ------------- --------------- ----------------------------------
   REG_CURRENT_HI           0x29          0x00          整板12v电流高八位
   -------------------- ------------- --------------- ----------------------------------
   stage寄存器               0x3c          0x00          判断运行在loader还是app
                                                         0:app
                                                         1:loader
   -------------------- ------------- --------------- ----------------------------------
   EEPROM_OFFSET_LO         0x3e          0x00          EEPROM 偏移地址低八位
   -------------------- ------------- --------------- ----------------------------------
   EEPROM_OFFSET_HI         0x3f          0x00          EEPROM 偏移地址高八位
   -------------------- ------------- --------------- ----------------------------------
   EEPROM 空间信息           0x40          0xXX          根据给入地址减去0x40的偏移,读取eeprom上
                             ~0x5f                        同等偏移位置上的信息
   -------------------- ------------- --------------- ----------------------------------
   EEPROM_LOCK              0x60          0x00          1:lock  0:unlock
   -------------------- ------------- --------------- ----------------------------------
   超温告警动作              0x65          0x02          1:reboot 2:poweroff
   -------------------- ------------- --------------- ----------------------------------
   超温告警温度              0x66          0x78          超过120摄氏度超温告警,下电
   -------------------- ------------- --------------- ----------------------------------
   恢复上电温度              0x67          0x55          温度下降到85摄氏度后自动上电
   ==================== ============= =============== ==================================


